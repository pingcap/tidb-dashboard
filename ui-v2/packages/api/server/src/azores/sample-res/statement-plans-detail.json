{
  "summary_begin_time": 1731395228,
  "summary_end_time": 1731396928,
  "digest_text": "select count ( ? ) as `cnt` , max ( `created_at` ) as `latest_created_at` , `unix_timestamp` ( max ( `created_at` ) ) as `latest_timestamp` from `github_events` where `created_at` between `from_unixtime` ( ? ) and ( utc_timestamp - interval ? minute ) and `from_unixtime` ( ? ) \u003e ( utc_timestamp - interval ? hour ) ;",
  "digest": "85310c3dcab6bcdd1a6c04a6f254ab47b9ce73165d54fb9d1a75931d6fb7f15e",
  "exec_count": 875,
  "stmt_type": "Select",
  "sum_latency": 5148485571,
  "max_latency": 164537484,
  "min_latency": 619447,
  "avg_latency": 5883983,
  "avg_compile_latency": 968229,
  "max_compile_latency": 2824436,
  "sum_cop_task_num": 18249,
  "max_cop_process_time": 162000000,
  "max_cop_wait_time": 5000000,
  "avg_process_time": 4080000,
  "max_process_time": 305000000,
  "avg_wait_time": 901714,
  "max_wait_time": 28000000,
  "avg_backoff_time": 2285,
  "max_backoff_time": 2000000,
  "avg_total_keys": 11801,
  "max_total_keys": 592472,
  "avg_processed_keys": 11780,
  "max_processed_keys": 592451,
  "avg_mem": 104312,
  "max_mem": 129833,
  "first_seen": 1731395230,
  "last_seen": 1731396926,
  "sample_user": "3EDFHZJX5iSzvfr.gh_api",
  "query_sample_text": "SELECT\n    /*+ MAX_EXECUTION_TIME(15000) */\n    COUNT(1) AS cnt,\n    MAX(created_at) AS latest_created_at,\n    UNIX_TIMESTAMP(MAX(created_at)) AS latest_timestamp\nFROM github_events\nWHERE\n    created_at BETWEEN FROM_UNIXTIME(1731395039) AND (UTC_TIMESTAMP - INTERVAL 5 MINUTE)\n    AND FROM_UNIXTIME(1731395039) \u003e (UTC_TIMESTAMP - INTERVAL 4 HOUR)",
  "schema_name": "gharchive_dev",
  "table_names": "gharchive_dev.github_events",
  "index_names": "github_events:index_github_events_on_created_at",
  "plan_count": 2,
  "plan": "\tid                       \ttask     \testRows     \toperator info                                                                                                                              \tactRows\texecution info                                                                                                                                                                                                                                                                                                                                 \tmemory   \tdisk\n\tProjection_5             \troot     \t1           \tColumn#35, Column#36, unix_timestamp(Column#36)-\u003eColumn#37                                                                                 \t1      \ttime:3.02ms, loops:2, Concurrency:OFF                                                                                                                                                                                                                                                                                                          \t17.7 KB  \tN/A\n\t└─HashAgg_15             \troot     \t1           \tfuncs:count(Column#39)-\u003eColumn#35, funcs:max(Column#40)-\u003eColumn#36                                                                         \t1      \ttime:3ms, loops:2, partial_worker:{wall_time:2.986984ms, concurrency:5, task_num:1, tot_wait:14.759342ms, tot_exec:7.86µs, tot_time:14.77375ms, max:2.957061ms, p95:2.957061ms}, final_worker:{wall_time:3.010556ms, concurrency:5, task_num:1, tot_wait:14.851254ms, tot_exec:11.675µs, tot_time:14.86594ms, max:2.982471ms, p95:2.982471ms}\t99.8 KB  \tN/A\n\t  └─IndexReader_16       \troot     \t1           \tindex:HashAgg_7                                                                                                                            \t15     \ttime:2.94ms, loops:2, cop_task: {num: 21, max: 2.89ms, min: 392.8µs, avg: 951.8µs, p95: 1.38ms, max_proc_keys: 4362, p95_proc_keys: 1028, tot_proc: 2ms, rpc_num: 21, rpc_time: 19.6ms, copr_cache_hit_ratio: 0.00, build_task_duration: 115.7µs, max_distsql_concurrency: 15}                                                              \t600 Bytes\tN/A\n\t    └─HashAgg_7          \tcop[tikv]\t1           \tfuncs:count(1)-\u003eColumn#39, funcs:max(gharchive_dev.github_events.created_at)-\u003eColumn#40                                                    \t15     \ttikv_task:{proc max:4ms, min:0s, avg: 952.4µs, p80:4ms, p95:4ms, iters:26, tasks:21}, scan_detail: {total_process_keys: 7568, total_process_keys_size: 317856, total_keys: 7589, get_snapshot_time: 202µs, rocksdb: {block: {}}}                                                                                                             \tN/A      \tN/A\n\t      └─IndexRangeScan_14\tcop[tikv]\t210539763.07\ttable:github_events, index:index_github_events_on_created_at(created_at), range:[2024-11-12 07:03:59,2024-11-12 07:06:14], keep order:false\t7568   \ttikv_task:{proc max:4ms, min:0s, avg: 952.4µs, p80:4ms, p95:4ms, iters:26, tasks:21}                                                                                                                                                                                                                                                          \tN/A      \tN/A",
  "plan_digest": "458c98bf3604ae89a16e932e38e3c9cadb7500646f7fa88795dcb5e0fbf4e5be",
  "binary_plan": "{\"discardedDueToTooLong\":false,\"main\":{\"accessObjects\":[],\"actRows\":1,\"children\":[{\"accessObjects\":[],\"actRows\":1,\"children\":[{\"accessObjects\":[{\"dynamicPartitionObjects\":{\"objects\":[{\"allPartitions\":true,\"database\":\"gharchive_dev\",\"table\":\"github_events\"}]}}],\"actRows\":15,\"children\":[{\"accessObjects\":[],\"actRows\":15,\"children\":[{\"accessObjects\":[{\"scanObject\":{\"database\":\"gharchive_dev\",\"indexes\":[{\"cols\":[\"created_at\"],\"name\":\"index_github_events_on_created_at\"}],\"table\":\"github_events\"}}],\"actRows\":7568,\"copExecInfo\":{\"tikv_task\":{\"avg\":\"952.4µs\",\"iters\":\"26\",\"min\":\"0s\",\"p80\":\"4ms\",\"p95\":\"4ms\",\"proc max\":\"4ms\",\"tasks\":\"21\"}},\"cost\":34275873428.61,\"diagnosis\":[\"high_est_error\"],\"diskBytes\":\"N/A\",\"duration\":\"20.0004ms\",\"estRows\":210539763.075,\"labels\":[],\"memoryBytes\":\"N/A\",\"name\":\"IndexRangeScan_14\",\"operatorInfo\":\"range:[2024-11-12 07:03:59,2024-11-12 07:06:14], keep order:false\",\"rootBasicExecInfo\":{},\"rootGroupExecInfo\":[],\"storeType\":\"tikv\",\"taskType\":\"cop\"}],\"copExecInfo\":{\"scan_detail\":{\"get_snapshot_time\":\"202µs\",\"rocksdb\":{\"block\":{}},\"total_keys\":\"7589\",\"total_process_keys\":\"7568\",\"total_process_keys_size\":\"317856\"},\"tikv_task\":{\"avg\":\"952.4µs\",\"iters\":\"26\",\"min\":\"0s\",\"p80\":\"4ms\",\"p95\":\"4ms\",\"proc max\":\"4ms\",\"tasks\":\"21\"}},\"cost\":40579435442.6955,\"diagnosis\":[],\"diskBytes\":\"N/A\",\"duration\":\"20.0004ms\",\"estRows\":1,\"labels\":[],\"memoryBytes\":\"N/A\",\"name\":\"HashAgg_7\",\"operatorInfo\":\"funcs:count(1)-\\u003eColumn#39, funcs:max(gharchive_dev.github_events.created_at)-\\u003eColumn#40\",\"rootBasicExecInfo\":{},\"rootGroupExecInfo\":[],\"storeType\":\"tikv\",\"taskType\":\"cop\"}],\"copExecInfo\":{},\"cost\":2705295700.4037004,\"diagnosis\":[],\"diskBytes\":\"N/A\",\"duration\":\"20.0004ms\",\"estRows\":1,\"labels\":[],\"memoryBytes\":\"600\",\"name\":\"IndexReader_16\",\"operatorInfo\":\"index:HashAgg_7\",\"rootBasicExecInfo\":{\"loops\":\"2\",\"time\":\"2.94ms\"},\"rootGroupExecInfo\":[{\"cop_task\":{\"avg\":\"951.8µs\",\"build_task_duration\":\"115.7µs\",\"copr_cache_hit_ratio\":\"0.00\",\"max\":\"2.89ms\",\"max_distsql_concurrency\":\"15\",\"max_proc_keys\":\"4362\",\"min\":\"392.8µs\",\"num\":\"21\",\"p95\":\"1.38ms\",\"p95_proc_keys\":\"1028\",\"rpc_num\":\"21\",\"rpc_time\":\"19.6ms\",\"tot_proc\":\"2ms\"}}],\"storeType\":\"tidb\",\"taskType\":\"root\"}],\"copExecInfo\":{},\"cost\":2705297237.9637003,\"diagnosis\":[],\"diskBytes\":\"N/A\",\"duration\":\"20.0004ms\",\"estRows\":1,\"labels\":[],\"memoryBytes\":\"102180\",\"name\":\"HashAgg_15\",\"operatorInfo\":\"funcs:count(Column#39)-\\u003eColumn#35, funcs:max(Column#40)-\\u003eColumn#36\",\"rootBasicExecInfo\":{\"loops\":\"2\",\"time\":\"3ms\"},\"rootGroupExecInfo\":[{\"final_worker\":{\"concurrency\":\"5\",\"max\":\"2.982471ms\",\"p95\":\"2.982471ms\",\"task_num\":\"1\",\"tot_exec\":\"11.675µs\",\"tot_time\":\"14.86594ms\",\"tot_wait\":\"14.851254ms\",\"wall_time\":\"3.010556ms\"},\"partial_worker\":{\"concurrency\":\"5\",\"max\":\"2.957061ms\",\"p95\":\"2.957061ms\",\"task_num\":\"1\",\"tot_exec\":\"7.86µs\",\"tot_time\":\"14.77375ms\",\"tot_wait\":\"14.759342ms\",\"wall_time\":\"2.986984ms\"}}],\"storeType\":\"tidb\",\"taskType\":\"root\"}],\"copExecInfo\":{},\"cost\":2705297248.1433,\"diagnosis\":[],\"diskBytes\":\"N/A\",\"duration\":\"3.02ms\",\"estRows\":1,\"labels\":[],\"memoryBytes\":\"18160\",\"name\":\"Projection_5\",\"operatorInfo\":\"Column#35, Column#36, unix_timestamp(Column#36)-\\u003eColumn#37\",\"rootBasicExecInfo\":{\"loops\":\"2\",\"time\":\"3.02ms\"},\"rootGroupExecInfo\":[{\"Concurrency\":\"OFF\"}],\"storeType\":\"tidb\",\"taskType\":\"root\"},\"withRuntimeStats\":true}",
  "plan_hint": "hash_agg(@`sel_1`), use_index(@`sel_1` `gharchive_dev`.`github_events` `index_github_events_on_created_at`), no_order_index(@`sel_1` `gharchive_dev`.`github_events` `index_github_events_on_created_at`), agg_to_cop(@`sel_1`), max_execution_time(15000)",
  "sum_ru": 16599.290484619145,
  "sum_rru": 16599.290484619145,
  "avg_ru": 18.970617696707595,
  "avg_rru": 18.970617696707595
}
